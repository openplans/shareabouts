<fieldset>
  <input type="hidden" name="visible" value="on">
  <input type="hidden" name="user_token" value="{{{ user_token }}}">

  <!-- TODO We need user data in the template to know whether a user
            is already logged in.
    -->

  {{# form_config.items }}

  <div class="field {{ type }}-field">
    {{#is_authenticated}}
      {{^is_submitter_name}}
        <label class="field-label {{ type }}-field-label" for="{{ default submission_type 'place' }}-{{ name }}">{{ prompt }} {{# optional }}<small>({{#_}}optional{{/_}})</small>{{/ optional }}</label>
      {{/is_submitter_name}}
    {{^}}
      <label class="field-label {{ type }}-field-label" for="{{ default submission_type 'place' }}-{{ name }}">{{ prompt }} {{# optional }}<small>({{#_}}optional{{/_}})</small>{{/ optional }}</label>
    {{/is_authenticated}}


    {{#if is_input}}
      {{> form-field-input form_config=../.. }}
    {{/if}}

    {{#is_textarea}}
      {{> form-field-textarea form_config=../.. }}
    {{/is_textarea}}

    {{#is_select}}
      {{> form-field-select form_config=../.. }}
    {{/is_select}}

    {{#is_radiogroup}}
      {{> form-field-radiogroup form_config=../.. }}
    {{/is_radiogroup}}

    {{#is_checkboxgroup}}
      {{> form-field-checkboxgroup form_config=../.. }}
    {{/is_checkboxgroup}}

    {{#is_file}}
      {{> form-field-file form_config=../.. }}
    {{/is_file}}

    {{#if help_text }}
    <div class="help-text {{ default submission_type 'place' }}-{{ name }}-help-text">{{ help_text }}</div>
    {{/if}}
  </div>
  {{/ form_config.items }}
</fieldset>
